function [x, t] = emgtemp (unit, opt, t0, t1, iband)% Returns templates in the requested format.% Copyright (c) 2006-2009. Kevin C. McGill and others.% Part of EMGlab version 1.0.% This work is licensed under the Aladdin free public license.% For copying permissions see license.txt.% email: emglab@emglab.net	global DECOMP CURR EMG SETS		if nargin==1; opt='tp'; end;			switch lower(opt);		case 'tp';		for i=1:length(unit);			x(:,i) = DECOMP.unit(unit(i)).tp;		end;			case 'interp'		if nargin<5; iband = CURR.band; end;		dt = 0.1/EMG.rate;		if nargin==2;			w = SETS.band(iband).temp_width;			t0 = -floor(w*EMG.rate/2)/EMG.rate;			t1 = t0 + w;		end;		t0 = ceil (t0/dt) * dt;		t1 = floor (t1/dt) * dt;		t = [t0: dt: t1]';				if unit >0 & unit <= DECOMP.nunits;			if iband == 1;				w = DECOMP.unit(unit).waveform.interp;			else				w = DECOMP.unit(unit).interpolated;			end;			f = floor(length(w)/20)*10;			i0 = round(t0/dt + f);			i1 = round(t1/dt + f);					k0 = max (i0, 0);			k1 = min (i1, length(w)-1);			x = 0*t;			x(k0-i0+1:k1-i0+1) = w(k0+1:k1+1);				else			x = nan*t;		end;		if nargout ==1;			x = struct ('sig', x, 't0', t0, 'dt', dt);		end;		end;